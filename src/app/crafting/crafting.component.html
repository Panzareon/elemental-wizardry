@for (source of sources; track source) {
  <div class="source">
    {{getName(source)}}
    @for (recipe of getRecipes(source); track recipe) {
      <mat-card class="recipe">
        <mat-card-header>{{recipe.name}}</mat-card-header>
        <mat-card-content>
          <app-costs [cost]="recipe.costs"></app-costs>
        </mat-card-content>
        <button mat-stroked-button (click)="craft(recipe)" [disabled]="!canCraft(recipe)" class="craft-button">Craft</button>
      </mat-card>
    }
    @for (machine of getRecipeMachines(source); track machine) {
      <mat-card class="recipe-machine progress-card">
        @if (machine.currentPart !== undefined) {
          <div class="progress" [style.width.%]="machine.progress/machine.currentPart.duration * 100"></div>
        }
        <mat-card-header>{{machine.name}}</mat-card-header>
        <mat-card-content>
          @if (machine.currentPart !== undefined) {
            <div>
              <mat-button-toggle mat-stroked-button (click)="activate(machine)"  [checked]="isActive(machine)" [disabled]="!machine.currentPart.asActive" class="craft-button">{{machine.currentPart.name}}</mat-button-toggle>
            </div>
          }
        </mat-card-content>
      </mat-card>
    }
  </div>
}
